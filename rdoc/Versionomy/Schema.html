<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>module Versionomy::Schema - Versionomy 0.4.4 Documentation</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="module">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/versionomy/schema/field.rb
    <li>lib/versionomy/schema/wrapper.rb
    <li>lib/versionomy/schema.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-create">::create</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../History_rdoc.html">History</a>
  
    <li class="file"><a href="../README_rdoc.html">README</a>
  
    <li class="file"><a href="../Versionomy_rdoc.html">Versionomy</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../Versionomy.html">Versionomy</a>
  
    <li><a href="../Versionomy/Conversion.html">Versionomy::Conversion</a>
  
    <li><a href="../Versionomy/Conversion/Base.html">Versionomy::Conversion::Base</a>
  
    <li><a href="../Versionomy/Conversion/Parsing.html">Versionomy::Conversion::Parsing</a>
  
    <li><a href="../Versionomy/Conversion/Parsing/Builder.html">Versionomy::Conversion::Parsing::Builder</a>
  
    <li><a href="../Versionomy/Conversion/Rubygems.html">Versionomy::Conversion::Rubygems</a>
  
    <li><a href="../Versionomy/Conversion/Semver.html">Versionomy::Conversion::Semver</a>
  
    <li><a href="../Versionomy/Errors.html">Versionomy::Errors</a>
  
    <li><a href="../Versionomy/Errors/CircularDescendantError.html">Versionomy::Errors::CircularDescendantError</a>
  
    <li><a href="../Versionomy/Errors/ConversionError.html">Versionomy::Errors::ConversionError</a>
  
    <li><a href="../Versionomy/Errors/ConversionRedefinedError.html">Versionomy::Errors::ConversionRedefinedError</a>
  
    <li><a href="../Versionomy/Errors/FormatCreationError.html">Versionomy::Errors::FormatCreationError</a>
  
    <li><a href="../Versionomy/Errors/FormatRedefinedError.html">Versionomy::Errors::FormatRedefinedError</a>
  
    <li><a href="../Versionomy/Errors/IllegalValueError.html">Versionomy::Errors::IllegalValueError</a>
  
    <li><a href="../Versionomy/Errors/ParseError.html">Versionomy::Errors::ParseError</a>
  
    <li><a href="../Versionomy/Errors/RangeOverlapError.html">Versionomy::Errors::RangeOverlapError</a>
  
    <li><a href="../Versionomy/Errors/RangeSpecificationError.html">Versionomy::Errors::RangeSpecificationError</a>
  
    <li><a href="../Versionomy/Errors/SchemaCreationError.html">Versionomy::Errors::SchemaCreationError</a>
  
    <li><a href="../Versionomy/Errors/SchemaMismatchError.html">Versionomy::Errors::SchemaMismatchError</a>
  
    <li><a href="../Versionomy/Errors/SymbolRedefinedError.html">Versionomy::Errors::SymbolRedefinedError</a>
  
    <li><a href="../Versionomy/Errors/TypeMismatchError.html">Versionomy::Errors::TypeMismatchError</a>
  
    <li><a href="../Versionomy/Errors/UnknownConversionError.html">Versionomy::Errors::UnknownConversionError</a>
  
    <li><a href="../Versionomy/Errors/UnknownFormatError.html">Versionomy::Errors::UnknownFormatError</a>
  
    <li><a href="../Versionomy/Errors/UnparseError.html">Versionomy::Errors::UnparseError</a>
  
    <li><a href="../Versionomy/Errors/VersionomyError.html">Versionomy::Errors::VersionomyError</a>
  
    <li><a href="../Versionomy/Format.html">Versionomy::Format</a>
  
    <li><a href="../Versionomy/Format/Base.html">Versionomy::Format::Base</a>
  
    <li><a href="../Versionomy/Format/Delimiter.html">Versionomy::Format::Delimiter</a>
  
    <li><a href="../Versionomy/Format/Delimiter/Builder.html">Versionomy::Format::Delimiter::Builder</a>
  
    <li><a href="../Versionomy/Format/Delimiter/IntegerFieldBuilder.html">Versionomy::Format::Delimiter::IntegerFieldBuilder</a>
  
    <li><a href="../Versionomy/Format/Delimiter/MappingSymbolBuilder.html">Versionomy::Format::Delimiter::MappingSymbolBuilder</a>
  
    <li><a href="../Versionomy/Format/Delimiter/StringFieldBuilder.html">Versionomy::Format::Delimiter::StringFieldBuilder</a>
  
    <li><a href="../Versionomy/Format/Delimiter/SymbolFieldBuilder.html">Versionomy::Format::Delimiter::SymbolFieldBuilder</a>
  
    <li><a href="../Versionomy/Format/Rubygems.html">Versionomy::Format::Rubygems</a>
  
    <li><a href="../Versionomy/Format/Rubygems/ExtraMethods.html">Versionomy::Format::Rubygems::ExtraMethods</a>
  
    <li><a href="../Versionomy/Format/Semver.html">Versionomy::Format::Semver</a>
  
    <li><a href="../Versionomy/Format/Semver/ExtraMethods.html">Versionomy::Format::Semver::ExtraMethods</a>
  
    <li><a href="../Versionomy/Format/Standard.html">Versionomy::Format::Standard</a>
  
    <li><a href="../Versionomy/Format/Standard/ExtraMethods.html">Versionomy::Format::Standard::ExtraMethods</a>
  
    <li><a href="../Versionomy/Format.html">Versionomy::Formats</a>
  
    <li><a href="../Versionomy/Schema.html">Versionomy::Schema</a>
  
    <li><a href="../Versionomy/Schema/Builder.html">Versionomy::Schema::Builder</a>
  
    <li><a href="../Versionomy/Schema/Field.html">Versionomy::Schema::Field</a>
  
    <li><a href="../Versionomy/Schema/FieldBuilder.html">Versionomy::Schema::FieldBuilder</a>
  
    <li><a href="../Versionomy/Schema/Wrapper.html">Versionomy::Schema::Wrapper</a>
  
    <li><a href="../Versionomy/Value.html">Versionomy::Value</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="module">module Versionomy::Schema</h1>

  <div id="description" class="description">
    
<h3 id="label-Version+number+schema.">Version number schema.</h3>

<p>A schema defines the structure and semantics of a version number. The
schema controls what fields are present in the version, how version numbers
are compared, what the default values are, and how values can change.
Version numbers with the same schema can be compared with one another, and
version numbers can be converted trivially to formats that share the same
schema, without requiring a <a href="Conversion.html">Conversion</a>
implementation.</p>

<p>At its simplest, a version number is defined as a sequence of fields, each
with a name and data type. These fields may be integer-valued,
string-valued, or symbolic, though most will probably be integers. Symbolic
fields are enumerated types that are useful, for example, if you want a
field to specify the type of prerelease (e.g. “alpha”, “beta”, or “release
candidate”).</p>

<p>As a simple conceptual example, you could construct a schema for version
numbers of the form “major.minor.tiny” like this. (This is a conceptual
diagram, not actual syntax.)</p>

<pre>(&quot;major&quot;: integer), (&quot;minor&quot;: integer), (&quot;tiny&quot;: integer)</pre>

<p>More generally, fields are actually organized into a DAG (directed acyclic
graph) in which the “most significant” field is the root, the next most
significant is a child of that root, and so forth down the line. The simple
schema above, then, is actually represented as a linked list (a graph with
one path), like this:</p>

<pre>(&quot;major&quot;: integer) -&gt;
    (&quot;minor&quot;: integer) -&gt;
        (&quot;tiny&quot;: integer) -&gt;
            nil</pre>

<p>It is, however, possible for the form of a field to depend on the value of
the previous field. For example, suppose we wanted a schema in which if the
value of the “minor” field is 0, then the “tiny” field doesn’t exist. e.g.</p>

<pre>(&quot;major&quot;: integer) -&gt;
    (&quot;minor&quot;: integer) -&gt;
        [value == 0] : nil
        [otherwise]  : (&quot;tiny&quot;: integer) -&gt;
            nil</pre>

<p>The <a href="Schema/Field.html">Versionomy::Schema::Field</a> class
represents a field in this graph. The <a
href="Schema/Wrapper.html">Versionomy::Schema::Wrapper</a> class represents
a full schema object.</p>

<p>Generally, you should create schemas using Versionomy::Schema#create. That
method provides a DSL that lets you quickly create the fields.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-create" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create</span><span
            class="method-args">(field_=nil, opts_={}, &block_)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Creates a schema. Returns an object of type <a
href="Schema/Wrapper.html">Versionomy::Schema::Wrapper</a>.</p>

<p>You may either pass a root field, or provide a block to use to build
fields. If you provide a block, you must use the methods in <a
href="Schema/Builder.html">Versionomy::Schema::Builder</a> in the block to
create the root field.</p>
          

          
          <div class="method-source-code" id="create-source">
            <pre><span class="ruby-comment"># File lib/versionomy/schema/wrapper.rb, line 49</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">field_</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">opts_</span>={}, &amp;<span class="ruby-identifier">block_</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">field_</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">block_</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-operator">::</span><span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">'You may provide either a root field or block but not both'</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_</span>
    <span class="ruby-identifier">builder_</span> = <span class="ruby-constant">Schema</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-operator">::</span><span class="ruby-constant">Blockenspiel</span>.<span class="ruby-identifier">invoke</span>(<span class="ruby-identifier">block_</span>, <span class="ruby-identifier">builder_</span>)
    <span class="ruby-identifier">field_</span> = <span class="ruby-identifier">builder_</span>.<span class="ruby-identifier">_get_field</span>
    <span class="ruby-identifier">modules_</span> = <span class="ruby-identifier">builder_</span>.<span class="ruby-identifier">_get_modules</span>
    <span class="ruby-identifier">aliases_</span> = <span class="ruby-identifier">builder_</span>.<span class="ruby-identifier">_get_aliases</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">modules_</span> = <span class="ruby-identifier">opts_</span>[<span class="ruby-value">:modules</span>] <span class="ruby-operator">||</span> []
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">Schema</span><span class="ruby-operator">::</span><span class="ruby-constant">Wrapper</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">field_</span>, <span class="ruby-identifier">modules_</span>, <span class="ruby-identifier">aliases_</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- create-source -->
          
        </div>

        

        
      </div><!-- create-method -->

    
    </section><!-- public-class-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

