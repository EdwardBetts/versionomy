<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Versionomy::Value - Versionomy 0.5.0 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><span class="include">::Comparable</span>
  
  
  </ul>
</div>

    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-3C">#&lt;</a>
    
    <li ><a href="#method-i-3C-3D-3E">#&lt;=&gt;</a>
    
    <li ><a href="#method-i-3D-3D">#==</a>
    
    <li ><a href="#method-i-3E">#&gt;</a>
    
    <li ><a href="#method-i-5B-5D">#[]</a>
    
    <li ><a href="#method-i-bump">#bump</a>
    
    <li ><a href="#method-i-change">#change</a>
    
    <li ><a href="#method-i-convert">#convert</a>
    
    <li ><a href="#method-i-each_field">#each_field</a>
    
    <li ><a href="#method-i-eql-3F">#eql?</a>
    
    <li ><a href="#method-i-field_names">#field_names</a>
    
    <li ><a href="#method-i-format">#format</a>
    
    <li ><a href="#method-i-has_field-3F">#has_field?</a>
    
    <li class="calls-super" ><a href="#method-i-method_missing">#method_missing</a>
    
    <li ><a href="#method-i-reset">#reset</a>
    
    <li ><a href="#method-i-schema">#schema</a>
    
    <li ><a href="#method-i-to_s">#to_s</a>
    
    <li ><a href="#method-i-unparse">#unparse</a>
    
    <li ><a href="#method-i-unparse_params">#unparse_params</a>
    
    <li ><a href="#method-i-values_array">#values_array</a>
    
    <li ><a href="#method-i-values_hash">#values_hash</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Versionomy::Value">
  <h1 id="class-Versionomy::Value" class="class">
    class Versionomy::Value
  </h1>

  <section class="description">
    
<h3 id="class-Versionomy::Value-label-Version+number+value">Version number value<span><a href="#class-Versionomy::Value-label-Version+number+value">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>A version number value is an ordered list of values, corresponding to an
ordered list of fields defined by a schema. For example, if the schema is a
simple one of the form “major.minor.tiny”, then the the version number
“1.4.2” would have the values <code>[1, 4, 2]</code> in that order,
corresponding to the fields <code>[:major, :minor, :tiny]</code>.</p>

<p>Version number values are comparable with other values that have an
equivalent schema.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(values_, format_, unparse_params_=nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create a value, given a hash or array of values, and a format. Both these
parameters are required.</p>

<p>The values should either be a hash of field names and values, or an array
of values that will be interpreted in field order.</p>

<p>You can also optionally provide default unparsing parameters for the value.</p>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 70</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">values_</span>, <span class="ruby-identifier">format_</span>, <span class="ruby-identifier">unparse_params_</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">values_</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Hash</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">values_</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Array</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-operator">::</span><span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;Expected hash or array but got #{values_.class}&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@_format</span> = <span class="ruby-identifier">format_</span>
  <span class="ruby-ivar">@_unparse_params</span> = <span class="ruby-identifier">unparse_params_</span>
  <span class="ruby-ivar">@_field_path</span> = []
  <span class="ruby-ivar">@_values</span> = {}
  <span class="ruby-identifier">values_</span> = <span class="ruby-identifier">_canonicalize_values_hash</span>(<span class="ruby-identifier">values_</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">values_</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Hash</span>)
  <span class="ruby-identifier">field_</span> = <span class="ruby-ivar">@_format</span>.<span class="ruby-identifier">schema</span>.<span class="ruby-identifier">root_field</span>
  <span class="ruby-keyword">while</span> <span class="ruby-identifier">field_</span>
    <span class="ruby-identifier">value_</span> = <span class="ruby-identifier">values_</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Hash</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">values_</span>[<span class="ruby-identifier">field_</span>.<span class="ruby-identifier">name</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">values_</span>.<span class="ruby-identifier">shift</span>
    <span class="ruby-identifier">value_</span> = <span class="ruby-identifier">value_</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">field_</span>.<span class="ruby-identifier">canonicalize_value</span>(<span class="ruby-identifier">value_</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">field_</span>.<span class="ruby-identifier">default_value</span>
    <span class="ruby-ivar">@_field_path</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">field_</span>
    <span class="ruby-ivar">@_values</span>[<span class="ruby-identifier">field_</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">value_</span>
    <span class="ruby-identifier">field_</span> = <span class="ruby-identifier">field_</span>.<span class="ruby-identifier">child</span>(<span class="ruby-identifier">value_</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">modules_</span> = <span class="ruby-ivar">@_format</span>.<span class="ruby-identifier">schema</span>.<span class="ruby-identifier">modules</span>
  <span class="ruby-identifier">extend</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">modules_</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">modules_</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-3C" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">&lt;</span><span
            class="method-args">(obj_)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Compare this version number with the given version number. The comparison
may succeed even if the two have different schemas, if the RHS can be
converted to the LHS&#39;s format.</p>
          
          

          
          <div class="method-source-code" id="3C-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 386</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">&lt;</span>(<span class="ruby-identifier">obj_</span>)
  <span class="ruby-identifier">val_</span> = (<span class="ruby-keyword">self</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">obj_</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">val_</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">Errors</span><span class="ruby-operator">::</span><span class="ruby-constant">SchemaMismatchError</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">val_</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-3C-3D-3E" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">&lt;=&gt;</span><span
            class="method-args">(obj_)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Compare this version number with the given version number, returning 0 if
the two are value-equal, a negative number if the RHS is greater, or a
positive number if the LHS is greater. The comparison may succeed even if
the two have different schemas, if the RHS can be converted to the
LHS&#39;s format.</p>
          
          

          
          <div class="method-source-code" id="3C-3D-3E-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 362</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">&lt;=&gt;</span>(<span class="ruby-identifier">obj_</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">obj_</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">String</span>)
    <span class="ruby-identifier">obj_</span> = <span class="ruby-ivar">@_format</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">obj_</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">obj_</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Value</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">obj_</span>.<span class="ruby-identifier">schema</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@_format</span>.<span class="ruby-identifier">schema</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">obj_</span> = <span class="ruby-identifier">obj_</span>.<span class="ruby-identifier">convert</span>(<span class="ruby-ivar">@_format</span>)
    <span class="ruby-keyword">rescue</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">obj_</span>.<span class="ruby-identifier">each_field_object</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field_</span>, <span class="ruby-identifier">value_</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">val_</span> = <span class="ruby-identifier">field_</span>.<span class="ruby-identifier">compare_values</span>(<span class="ruby-ivar">@_values</span>[<span class="ruby-identifier">field_</span>.<span class="ruby-identifier">name</span>], <span class="ruby-identifier">value_</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">val_</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">val_</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-3D-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">==</span><span
            class="method-args">(obj_)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if this version number is value-equal to the given number.
This type of equality means that they are equivalent, or that it is
possible to convert the RHS to the LHS&#39;s format, and that they would be
equivalent after such a conversion has taken place. Note that this is
different from the definition of <code>eql?</code>.</p>
          
          

          
          <div class="method-source-code" id="3D-3D-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 351</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">obj_</span>)
  (<span class="ruby-keyword">self</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">obj_</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-3E" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">&gt;</span><span
            class="method-args">(obj_)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Compare this version number with the given version number. The comparison
may succeed even if the two have different schemas, if the RHS can be
converted to the LHS&#39;s format.</p>
          
          

          
          <div class="method-source-code" id="3E-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 399</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">&gt;</span>(<span class="ruby-identifier">obj_</span>)
  <span class="ruby-identifier">val_</span> = (<span class="ruby-keyword">self</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">obj_</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">val_</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">Errors</span><span class="ruby-operator">::</span><span class="ruby-constant">SchemaMismatchError</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">val_</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-5B-5D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">[]</span><span
            class="method-args">(field_)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the value of the given field, or nil if the field is not
recognized. The field may be specified as a field object, field name, or
field index.</p>
          
          

          
          <div class="method-source-code" id="5B-5D-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 202</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">[]</span>(<span class="ruby-identifier">field_</span>)
  <span class="ruby-ivar">@_values</span>[<span class="ruby-identifier">_interpret_field</span>(<span class="ruby-identifier">field_</span>)]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-bump" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">bump</span><span
            class="method-args">(field_)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a new version number created by bumping the given field. The field
may be specified as a field object, field name, or field index. Returns
self unchanged if the field was not recognized or could not be modified.</p>
          
          

          
          <div class="method-source-code" id="bump-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 228</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">bump</span>(<span class="ruby-identifier">field_</span>)
  <span class="ruby-identifier">name_</span> = <span class="ruby-identifier">_interpret_field</span>(<span class="ruby-identifier">field_</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">name_</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@_values</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">name_</span>)
  <span class="ruby-identifier">values_</span> = []
  <span class="ruby-ivar">@_field_path</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">fld_</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">oldval_</span> = <span class="ruby-ivar">@_values</span>[<span class="ruby-identifier">fld_</span>.<span class="ruby-identifier">name</span>]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">fld_</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">name_</span>
      <span class="ruby-identifier">newval_</span> = <span class="ruby-identifier">fld_</span>.<span class="ruby-identifier">bump_value</span>(<span class="ruby-identifier">oldval_</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">newval_</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">oldval_</span>
      <span class="ruby-identifier">values_</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">newval_</span>
      <span class="ruby-keyword">return</span> <span class="ruby-constant">Value</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">values_</span>, <span class="ruby-ivar">@_format</span>, <span class="ruby-ivar">@_unparse_params</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">values_</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">oldval_</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-change" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">change</span><span
            class="method-args">(values_={}, unparse_params_={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a new version number created by cloning this version number and
changing the given field values.</p>

<p>You should pass in a hash of field names to values. These are the fields to
modify; any other fields will be left alone, unless they are implicitly
changed by the modifications you are making. For example, changing the
:release_type on a value using the standard format, may change which fields
are present in the resulting value.</p>

<p>You may also pass a delta hash to modify the unparse params stored in the
value.</p>
          
          

          
          <div class="method-source-code" id="change-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 281</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">change</span>(<span class="ruby-identifier">values_</span>={}, <span class="ruby-identifier">unparse_params_</span>={})
  <span class="ruby-identifier">unparse_params_</span> = <span class="ruby-ivar">@_unparse_params</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">unparse_params_</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@_unparse_params</span>
  <span class="ruby-identifier">values_</span> = <span class="ruby-identifier">_canonicalize_values_hash</span>(<span class="ruby-identifier">values_</span>)
  <span class="ruby-constant">Value</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@_values</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">values_</span>), <span class="ruby-ivar">@_format</span>, <span class="ruby-identifier">unparse_params_</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-convert" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">convert</span><span
            class="method-args">(format_, convert_params_=nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Attempts to convert this value to the given format, and returns the
resulting value.</p>

<p>Raises <a
href="Errors/ConversionError.html">Versionomy::Errors::ConversionError</a>
if the value could not be converted.</p>
          
          

          
          <div class="method-source-code" id="convert-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 294</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">convert</span>(<span class="ruby-identifier">format_</span>, <span class="ruby-identifier">convert_params_</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">format_</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">String</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">format_</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Symbol</span>)
    <span class="ruby-identifier">format_</span> = <span class="ruby-constant">Format</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">format_</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@_format</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">format_</span>
  <span class="ruby-identifier">from_schema_</span> = <span class="ruby-ivar">@_format</span>.<span class="ruby-identifier">schema</span>
  <span class="ruby-identifier">to_schema_</span> = <span class="ruby-identifier">format_</span>.<span class="ruby-identifier">schema</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">from_schema_</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">to_schema_</span>
    <span class="ruby-keyword">return</span> <span class="ruby-constant">Value</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@_values</span>, <span class="ruby-identifier">format_</span>, <span class="ruby-identifier">convert_params_</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">conversion_</span> = <span class="ruby-constant">Conversion</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">from_schema_</span>, <span class="ruby-identifier">to_schema_</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">conversion_</span>
    <span class="ruby-identifier">conversion_</span>.<span class="ruby-identifier">convert_value</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">format_</span>, <span class="ruby-identifier">convert_params_</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">standard_format_</span> = <span class="ruby-constant">Format</span>.<span class="ruby-identifier">get</span>(<span class="ruby-value">:standard</span>)
    <span class="ruby-identifier">conversion1_</span> = <span class="ruby-constant">Conversion</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">from_schema_</span>, <span class="ruby-identifier">standard_format_</span>)
    <span class="ruby-identifier">conversion2_</span> = <span class="ruby-constant">Conversion</span>.<span class="ruby-identifier">get</span>(<span class="ruby-identifier">standard_format_</span>, <span class="ruby-identifier">to_schema_</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">conversion1_</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">conversion2_</span>
      <span class="ruby-identifier">value_</span> = <span class="ruby-identifier">conversion1_</span>.<span class="ruby-identifier">convert_value</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">standard_format_</span>, <span class="ruby-identifier">convert_params_</span>)
      <span class="ruby-identifier">conversion2_</span>.<span class="ruby-identifier">convert_value</span>(<span class="ruby-identifier">value_</span>, <span class="ruby-identifier">format_</span>, <span class="ruby-identifier">convert_params_</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">Errors</span><span class="ruby-operator">::</span><span class="ruby-constant">UnknownConversionError</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-each_field" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">each_field</span><span
            class="method-args">() { |field_, _values| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Iterates over each field, in field order, yielding the field name and
value.</p>
          
          

          
          <div class="method-source-code" id="each_field-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 155</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">each_field</span>
  <span class="ruby-ivar">@_field_path</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field_</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">field_</span>, <span class="ruby-ivar">@_values</span>[<span class="ruby-identifier">field_</span>.<span class="ruby-identifier">name</span>])
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-eql-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">eql?</span><span
            class="method-args">(obj_)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if this version number is equivalent to the given number. This
type of equality means their schemas are compatible and their field values
are equal. Note that this is different from the definition of
<code>==</code>.</p>
          
          

          
          <div class="method-source-code" id="eql-3F-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 331</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">obj_</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">obj_</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">String</span>)
    <span class="ruby-identifier">obj_</span> = <span class="ruby-ivar">@_format</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">obj_</span>) <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">obj_</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Value</span>)
  <span class="ruby-identifier">index_</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">obj_</span>.<span class="ruby-identifier">each_field_object</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field_</span>, <span class="ruby-identifier">value_</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">field_</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@_field_path</span>[<span class="ruby-identifier">index_</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">value_</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@_values</span>[<span class="ruby-identifier">field_</span>.<span class="ruby-identifier">name</span>]
    <span class="ruby-identifier">index_</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-field_names" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">field_names</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an array of recognized field names for this value, in field order.
This is the order of the fields actually present in this value, in order
from most to least significant.</p>
          
          

          
          <div class="method-source-code" id="field_names-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 176</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">field_names</span>
  <span class="ruby-ivar">@_field_path</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">field_</span><span class="ruby-operator">|</span> <span class="ruby-identifier">field_</span>.<span class="ruby-identifier">name</span> }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-format" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">format</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the format defining the schema and formatting/parsing of this
version number.</p>
          
          

          
          <div class="method-source-code" id="format-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 140</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">format</span>
  <span class="ruby-ivar">@_format</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-has_field-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">has_field?</span><span
            class="method-args">(field_)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if this value contains the given field, which may be specified
as a field object, name, or index.</p>
          
          

          
          <div class="method-source-code" id="has_field-3F-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 184</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_field?</span>(<span class="ruby-identifier">field_</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">field_</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Schema</span><span class="ruby-operator">::</span><span class="ruby-constant">Field</span>
    <span class="ruby-ivar">@_field_path</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">field_</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-operator">::</span><span class="ruby-constant">Integer</span>
    <span class="ruby-ivar">@_field_path</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">field_</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">field_</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0</span>
  <span class="ruby-keyword">when</span> <span class="ruby-operator">::</span><span class="ruby-constant">String</span>, <span class="ruby-operator">::</span><span class="ruby-constant">Symbol</span>
    <span class="ruby-ivar">@_values</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-ivar">@_format</span>.<span class="ruby-identifier">schema</span>.<span class="ruby-identifier">canonical_name</span>(<span class="ruby-identifier">field_</span>))
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-operator">::</span><span class="ruby-constant">ArgumentError</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-method_missing" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">method_missing</span><span
            class="method-args">(symbol_)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Field values may be retrieved by calling them as methods.</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="method_missing-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 413</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">method_missing</span>(<span class="ruby-identifier">symbol_</span>)
  <span class="ruby-keyword">self</span>[<span class="ruby-identifier">symbol_</span>] <span class="ruby-operator">||</span> <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reset" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reset</span><span
            class="method-args">(field_)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a new version number created by resetting the given field. The
field may be specified as a field object, field name, or field index.
Returns self unchanged if the field was not recognized or could not be
modified.</p>
          
          

          
          <div class="method-source-code" id="reset-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 252</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reset</span>(<span class="ruby-identifier">field_</span>)
  <span class="ruby-identifier">name_</span> = <span class="ruby-identifier">_interpret_field</span>(<span class="ruby-identifier">field_</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">name_</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@_values</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">name_</span>)
  <span class="ruby-identifier">values_</span> = []
  <span class="ruby-ivar">@_field_path</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">fld_</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">oldval_</span> = <span class="ruby-ivar">@_values</span>[<span class="ruby-identifier">fld_</span>.<span class="ruby-identifier">name</span>]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">fld_</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">name_</span>
      <span class="ruby-identifier">values_</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">fld_</span>.<span class="ruby-identifier">default_value</span>
      <span class="ruby-keyword">return</span> <span class="ruby-constant">Value</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">values_</span>, <span class="ruby-ivar">@_format</span>, <span class="ruby-ivar">@_unparse_params</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">values_</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">oldval_</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-schema" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">schema</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the schema defining the structure and semantics of this version
number.</p>
          
          

          
          <div class="method-source-code" id="schema-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 132</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">schema</span>
  <span class="ruby-ivar">@_format</span>.<span class="ruby-identifier">schema</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_s" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_s</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a string representation generated by unparsing. If unparsing fails,
does not raise <a
href="Errors/UnparseError.html">Versionomy::Errors::UnparseError</a>, but
instead returns the string generated by <code>inspect</code>.</p>
          
          

          
          <div class="method-source-code" id="to_s-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 111</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">unparse</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errors</span><span class="ruby-operator">::</span><span class="ruby-constant">UnparseError</span>
    <span class="ruby-identifier">_inspect</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-unparse" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">unparse</span><span
            class="method-args">(params_=nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Unparse this version number and return a string.</p>

<p>Raises <a
href="Errors/UnparseError.html">Versionomy::Errors::UnparseError</a> if
unparsing failed.</p>
          
          

          
          <div class="method-source-code" id="unparse-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 124</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">unparse</span>(<span class="ruby-identifier">params_</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-ivar">@_format</span>.<span class="ruby-identifier">unparse</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">params_</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-unparse_params" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">unparse_params</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return the unparsing parameters for this value. Returns nil if this value
was not created using a parser.</p>
          
          

          
          <div class="method-source-code" id="unparse_params-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 148</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">unparse_params</span>
  <span class="ruby-ivar">@_unparse_params</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@_unparse_params</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-values_array" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">values_array</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the value as an array of field values, in field order. This is the
order of the fields actually present in this value, in order from most to
least significant.</p>
          
          

          
          <div class="method-source-code" id="values_array-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 211</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">values_array</span>
  <span class="ruby-ivar">@_field_path</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">field_</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@_values</span>[<span class="ruby-identifier">field_</span>.<span class="ruby-identifier">name</span>] }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-values_hash" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">values_hash</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the value as a hash of values keyed by field name.</p>
          
          

          
          <div class="method-source-code" id="values_hash-source">
            <pre><span class="ruby-comment"># File lib/versionomy/value.rb, line 218</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">values_hash</span>
  <span class="ruby-ivar">@_values</span>.<span class="ruby-identifier">dup</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

